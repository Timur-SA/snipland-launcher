# AGENTS.md (Техническое задание: Snipland Launcher)

## Обзор проекта
**Snipland Launcher** — легкий кроссплатформенный лаунчер для Minecraft с системой автоматического обновления сборок.

## Технологический стек
- **Язык:** C# (.NET 8)
- **UI Фреймворк:** Avalonia UI (кроссплатформенность)
- **Ядро:** CmlLib.Core (логика загрузки и запуска игры)
- **Авторизация:** Ely.by (через протокол Yggdrasil)

## Функциональные требования
1. **Авторизация:**
   - Вход по логину/паролю через Ely.by.
   - Сохранение токена сессии для автоматического входа.
2. **Работа с манифестами:**
   - Загрузка основного списка режимов (global manifest).
   - Загрузка детального манифеста для выбранного режима (files manifest).
3. **Синхронизация файлов:**
   - Скачивание Minecraft, библиотек и ассетов (средствами CmlLib.Core).
   - Скачивание файлов сборки (моды, конфиги) по прямым ссылкам.
   - Проверка целостности файлов по **SHA1** хэшу и размеру.
   - **Умная очистка:** удаление файлов в заданных директориях (например, `mods/`), если их нет в манифесте.
4. **Запуск игры:**
   - Поддержка Forge, Fabric и Vanilla.
   - Автоматическая установка подходящей версии Java (JRE).
   - Настройка оперативной памяти и аргументов JVM.
5. **Интерфейс:**
   - Экран логина.
   - Список режимов с описанием, иконками и баннерами.
   - Индикация прогресса загрузки (общий прогресс и текущий файл).

## Структуры данных

### Основной манифест (`launcher.json`)
```json
{
  "maintenance_message": "",
  "modes": [
    {
      "id": "magic_rpg",
      "name": "Магический мир",
      "version": "1.4.2",
      "minecraft_version": "1.19.2",
      "loader": {
        "type": "forge",
        "version": "43.2.0"
      },
      "description": "Описание режима...",
      "icon_url": "...",
      "banner_url": "...",
      "remote_manifest_url": "..."
    }
  ]
}
```

### Манифест режима (`files.json`)
```json
{
  "files": [
    {
      "path": "mods/jei.jar",
      "size": 450210,
      "hash": "sha1-хеш",
      "url": "..."
    }
  ],
  "update_cleaning": [
    "mods/",
    "config/"
  ]
}
```
